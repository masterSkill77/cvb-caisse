<%- include("../pages/header") %>
<div id="depense">
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <a href="/dashboard">Accueil</a>
            <i class="fa fa-circle"></i>
        </li>
        <li>
            <span>depense</span>
        </li>
    </ul>
    <div class="page-toolbar">
        <div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom" data-original-title="Change dashboard date range">
            <i class="icon-calendar"></i>&nbsp;
            <span class="thin uppercase hidden-xs"></span>&nbsp;
            <i class="fa fa-angle-down"></i>
        </div>
    </div>
</div>
<h3 class="page-title"> Liste des depenses
    <!-- <small>enregistree</small> -->
</h3>
<div class="col-md-12 col-sm-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box blue">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-cogs"></i>Depense </div>
                <div class="actions">
                    <a class="btn btn-default btn-outline sbold" data-toggle="modal" href="#basic">
                     <i class="fa fa-plus"></i> Ajouter</a>
                    <a href="javascript:;" id="down" class="btn btn-default btn-sm">
                        <i class="fa fa-print"></i> Exporter en Excel </a>
                        <a class="btn btn-default btn-outline sbold" >
                    <form action="">
                    <input type="text" class="form-control" placeholder="rechercher..." >
                    </form></a>
                    <a  class="btn btn-default btn-sm">
                        <i class="fa fa-search"></i> Rechercher </a>
                </div>
            </div>
            <div class="portlet-body"  style="height:460px;overflow:scroll;box-shadow: 0px 20px 30px;">
                <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample">
                    <thead>
                        <tr>
                          
                            <th> Id </th>
                            <th> Nom </th>
                            <th> Motif </th>
                            <th> Montant </th>
                            <th> Description </th>
                            <th> Type </th>
                            <th> Date</th>
                            <th colspan="2"> Action </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="depense in liste" :key="depense.id" class="odd gradeX">
                            <td> {{depense.id}} </td>
                            <td>
                                <a > {{depense.name}} </a>
                            </td>
                            <td>
                                <span class="label label-sm label-success">  {{depense.motif}} </span>
                            </td>
                             <td>
                                <a>  {{depense.montant}} <span>Ariary</span></a>
                            </td>
                            <td>
                                <span class="label label-sm label-success">  {{depense.description}}</span>
                            </td>
                            <td>  {{depense.type}} </td>
                             <td>
                                <a>  {{depense.datedepense}} </a>
                            </td>
                            <td>
                            <a class="btn btn-sm blue" @click="edit(depense)" data-toggle="modal" href="#modification">Editer
                                <i class="fa fa-edit"></i>
                            </a>
                            </a>
                            <a class="btn btn-sm red" @click="del(depense.id)" data-toggle="modal" href="#suppre">Supprimer
                                <i class="icon-trash"></i>
                            </a>
                            </td>
                        </tr>
                       
                        </tr>
                       </tbody>
                </table>
            </div>
            <form action="/pdf" method="get">
            <button class="btn btn-sm yellow">Liste en PDF</a> </button>
            </form>
        </div>



            <!-- modal ajout -->
                <div class="modal fade" id="basic" style="border-radius:40px;" tabindex="-1" role="basic" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header info" style="background-color:rgb(66, 66, 66);;border-radius:20px;">
                                <button type="button" class="close" data-dismiss="modal" style="color:white;" aria-hidden="true"></button>
                                <h4 class="modal-title" style="color:white; font-size:40px;text-align:center">  <strong><i>
                                <i class="icon-user font-red-sunglo"></i>                                                    
                                faire une depense</i></strong>  </h4>
                            </div>
                            <div class="modal-body"> 
                             <!-- BEGIN FORM-->
                <form action="#" class="form-horizontal">
                    <div class="form-body">
                    <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>Nom</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="name" class="form-control"  placeholder="nom depense...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>motif</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="motif" class="form-control" placeholder="motif...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                         <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>description</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="description" class="form-control" placeholder="description...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                         <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>type</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="type" class="form-control" placeholder="type...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>montant</i></strong></label>
                            <div class="col-md-9">
                                <input type="number" v-model="montant" class="form-control" placeholder="chiffre">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">montant...</span>
                            </div>
                        </div>
                       

                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>date</i></strong></label>
                            <div class="col-md-9">
                                <input type="date" v-model="datedepense" class="form-control" placeholder="date">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                        
                    </div>
                    <div class="modal-footer">
                                <button type="button" @click="ajouter" class="btn green" data-dismiss="modal"><i class="fa fa-save"></i> <span> Enregistrer </span></button>
                                <button type="button" class="btn dark btn-outline" data-dismiss="modal"><i class="fa fa-share"></i> <span> Annuler </span></button>
                            </div>
                            </div>

                </form>
                           
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>


<!-- modal modifiaction -->
<div class="modal fade" id="modification" style="border-radius:40px;" tabindex="-1" role="basic" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header info" style="background-color:rgb(66, 66, 66);;border-radius:20px;">
                                <button type="button" class="close" data-dismiss="modal" style="color:white;" aria-hidden="true"></button>
                                <h4 class="modal-title" style="color:white; font-size:40px;text-align:center">  <strong><i>
                                <i class="icon-user font-red-sunglo"></i>                                                    
                                modification du depense</i></strong>  </h4>
                            </div>
                            <div class="modal-body"> 
                             <!-- BEGIN FORM-->
                <form action="#" class="form-horizontal">
                    <div class="form-body">
                    <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>Nom</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="nameEdit" class="form-control"  placeholder="nom depense...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>motif</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="motifEdit" class="form-control" placeholder="motif...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                         <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>description</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="descriptionEdit" class="form-control" placeholder="description...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                         <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label " for="form_control_1"><strong><i>type</i></strong></label>
                            <div class="col-md-9">
                                <input type="text" v-model="typeEdit" class="form-control" placeholder="type...">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completer...</span>
                            </div>
                        </div>
                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>montant</i></strong></label>
                            <div class="col-md-9">
                                <input type="number" v-model="montantEdit" class="form-control" placeholder="chiffre">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">montant...</span>
                            </div>
                        </div>
                       

                        <div class="form-group form-md-line-input has-success">
                            <label class="col-md-3 control-label" for="form_control_1"><strong><i>date du depense</i></strong></label>
                            <div class="col-md-9">
                                <input type="date" v-model="datedepenseEdit" class="form-control" placeholder="date">
                                <div class="form-control-focus"> </div>
                                <span class="help-block">completee...</span>
                            </div>
                        </div>                    </div>
                    <div class="modal-footer">
                                <button type="button"  @click="update()" data-dismiss="modal" class="btn green"><i class="fa fa-save"></i> <span> Mettre a jour </span></button>
                                <button type="button" class="btn dark btn-outline" data-dismiss="modal"><i class="fa fa-share"></i> <span> Annulle </span></button>
                            </div>
                            </div>

                </form>
                           
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>


                <!-- suppression -->
                <div class="modal fade" id="suppre" style="border-radius:40px;" tabindex="-1" role="basic" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header info" style="background-color:#fc0612;border-radius:20px;">
                                <button type="button" class="close" data-dismiss="modal" style="color:white;" aria-hidden="true"></button>
                                <h4 class="modal-title" style="color:white" >Vous ete sur pour la suppression </h4>
                            </div>
                            <div class="modal-body"> 
                            
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Annuler</button>
                                <button type="button" @click="suppression" data-dismiss="modal" class="btn red">Supprimer</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
</div>
                      <%- include("../pages/footer",{
    script:`
    <script src="../assets/projet/Vue.js"></script>
    <script src="../assets/projet/depense/depense.js"></script>
    <script src="../assets/table2excel.js" type="text/javascript"></script>
    <script>
            document.getElementById('down').addEventListener('click',function(){
                var table = new Table2Excel();
                table.export(document.querySelectorAll("#sample"))
            })
        </script>
    `
}) %>
