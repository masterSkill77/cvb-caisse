<%- include("../pages/header") %>
<div id="journalpayee">
    <div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <a href="/dashboard">Accueil</a>
            <i class="fa fa-circle"></i>
        </li>
        <li>
            <span>Finance </span>
        </li>
    </ul>
    <div class="page-toolbar">
        <div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom" data-original-title="Change dashboard date range">
            <i class="icon-calendar"></i>&nbsp;
            <span class="thin uppercase hidden-xs"></span>&nbsp;
            <i class="fa fa-angle-down"></i>
        </div>
    </div>
</div>
<h3 class="page-title"> Liste des payement
    <small>enregistree</small>
</h3>


<form class="form-inline margin-bottom-40" role="form">
    <div class="form-group form-md-line-input has-success">
    <label for="form_control_1"><strong><i>Date debut</i></strong></label><br/>                                        
        <input type="date" v-model="deb" class="form-control" id="form_control_1" placeholder="date 1">
        <div class="form-control-focus"> 
        </div>
    </div>
    <div class="form-group form-md-line-input has-success">
    <label for="form_control_2"><strong><i>Date fin</i></strong></label><br/>
        <input type="date" v-model="fi" class="form-control" id="form_control_2" placeholder="date 2">
        <div class="form-control-focus"> </div>
    </div>
    
    <button type="button" @click="comm" class="btn btn-primary"><i class="fa fa-calendar"></i> Afficher</button>
 </form>
<!-- liste pour les client -->

        <div class="col-md-&é">
        <!-- BEGIN CONDENSED TABLE PORTLET-->
        <div class="portlet box yellow">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-picture"></i>Liste de historique de commande </div>
                <div class="tools">
                
                <a href="javascript:;" id="comm" class="btn btn-danger btn-sm">
                        <i class="fa fa-print"></i> Excel </a>
                    <a href="javascript:;" class="collapse"> </a>
                    <a href="javascript:;" class="remove"> </a>
                    
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-scrollable">
                    <table id="commexcel" class="table table-condensed table-hover">
                        <thead>
                            <tr>
                                <th> numero facture </th>
                                <th> nom client </th>
                                <th> payee </th>
                                <th> net a payee </th>
                                <th> date de paement </th>
                                <th> date de reste </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="histo in cli" :key="histo.id">
                                <td> {{histo.numfact}} </td>
                                 <td> {{histo.clien}} </td>
                                <td> {{histo.payee}} <i>Ar</i> </td>
                                <td> {{histo.net}} <i>Ar</i> </td>
                                <td> {{histo.datepayement}} </td>
                                <td> {{histo.date_echeance}} </td>
                               
                            </tr>
                            
                        </tbody>
                    </table>
              <span><i>Total : <strong>{{TOTAL}}</strong> Ariary</i></span>
              </div>
            </div>
        </div>
        <h2><span><i>Total des commandes payees: <strong>{{TOTAL}}</strong> Ariary</i></span></h2>

        <!-- END CONDENSED TABLE PORTLET-->
    </div>

















    <form class="form-inline margin-bottom-40" role="form">
        <div class="form-group form-md-line-input has-success">
        <label for="form_control_1"><strong><i>Date debut</i></strong></label><br/>                                        
            <input type="date" v-model="debi" class="form-control" id="form_control_1" placeholder="date 1">
            <div class="form-control-focus"> 
            </div>
        </div>
        <div class="form-group form-md-line-input has-success">
        <label for="form_control_2"><strong><i>Date fin</i></strong></label><br/>
            <input type="date" v-model="fii" class="form-control" id="form_control_2" placeholder="date 2">
            <div class="form-control-focus"> </div>
        </div>
        
        <button type="button" @click="appro" class="btn btn-primary"><i class="fa fa-calendar"></i> Afficher</button>
     </form>
    <!-- pour le fournisseur -->

    <div class="col-md-&é">
        <!-- BEGIN CONDENSED TABLE PORTLET-->
        <div class="portlet box blue">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-picture"></i>Liste de historique de commande </div>
                <div class="tools">
                
                <a href="javascript:;" id="appro" class="btn btn-danger btn-sm">
                        <i class="fa fa-print"></i> Excel </a>
                    <a href="javascript:;" class="collapse"> </a>
                    <a href="javascript:;" class="remove"> </a>
                    
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-scrollable">
                    <table  id="approexcel" class="table table-condensed table-hover">
                        <thead>
                            <tr>
                                <th> numero facture </th>
                                <th> nom fournisseur </th>
                                <th> payee </th>
                                <th> net a payee </th>
                                <th> date de payement </th>
                                <th> date de reste </th>
                            </tr>
                        </thead>
                        <tbody>
                           <tr v-for="histo in fou" :key="histo.id">
                            <td> {{histo.numfact}} </td>
                            <td> {{histo.fourniseur}} </td>
                           <td> {{histo.payee}} <i>Ar</i></td>
                           <td> {{histo.net}} <i>Ar</i></td>
                           <td> {{histo.datepayement}} </td>
                           <td> {{histo.date_echeance}} </td>
                            </tr> 
                            
                        </tbody>
                    </table>
        <span><i>Total approvisionn: <strong>{{TOTA}}</strong> Ariary</i></span>

                </div>
            </div>
        </div>
        
        <h2><span><i>Total approvisionn: <strong>{{TOTA}}</strong> Ariary</i></span></h2>
        <!-- END CONDENSED TABLE PORTLET-->
    </div>
</div>

    <%- include("../pages/footer",{
        script:`
        <script src="../assets/projet/Vue.js"></script>
    <script src="../assets/projet/journal/journalpayee.js"></script>
    <script src="../assets/table2excel.js" type="text/javascript"></script>
    <script>
            document.getElementById('comm').addEventListener('click',function(){
                var table = new Table2Excel();
                table.export(document.querySelectorAll("#commexcel"))
            })
            document.getElementById('appro').addEventListener('click',function(){
                var table = new Table2Excel();
                table.export(document.querySelectorAll("#approexcel"))
            })
        </script>
        `
    }) %>
